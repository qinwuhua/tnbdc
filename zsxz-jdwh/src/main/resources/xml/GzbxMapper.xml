<?xml version='1.0' encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hdsx.jdwh.mapper.GzbxMapper">
    <select id="getSbInfo" parameterType="hashmap" resultType="com.hdsx.jdwh.entity.Gzbx">
        select  SBMC, SBXH ggxh, SBFZR from JDWH_SBB
    </select>

    <insert id="addGzbx" parameterType="com.hdsx.jdwh.entity.Gzbx">
        insert into JDWH_GZBX
        <trim prefix="(" suffix=")" suffixOverrides="," >
            <if test="id != null" >id,</if>
            <if test="djbh != null" >djbh,</if>
            <if test="gzlx != null" >gzlx,</if>
            <if test="sbmc != null" >sbmc,</if>
            <if test="ggxh != null" >ggxh,</if>
            <if test="bzrq != null" >bzrq,</if>
            <if test="bgr != null" >bgr,</if>
            <if test="yqxfrq != null" >yqxfrq,</if>
            <if test="sbfzr != null" >sbfzr,</if>
            <if test="sbdd != null" >sbdd,</if>
            <if test="gzms != null" >gzms,</if>
            <if test="bz != null" >bz,</if>
            <if test="tbr != null" >tbr,</if>
            <if test="tbsj != null" >tbsj,</if>
            <if test="tbdw != null" >tbdw,</if>
            <if test="tbbm != null" >tbbm,</if>
            <if test="tbdwdm != null" >tbdwdm,</if>
            <if test="fpzt != null" >fpzt,</if>
            <if test="fpry != null" >fpry,</if>
            <if test="bxfs != null" >bxfs,</if>
            <if test="isly != null" >isly,</if>
            <if test="isww != null" >isww,</if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides="," >
            <if test="id != null" >#{id},</if>
            <if test="djbh != null" >#{djbh},</if>
            <if test="gzlx != null" >#{gzlx},</if>
            <if test="sbmc != null" >#{sbmc},</if>
            <if test="ggxh != null" >#{ggxh},</if>
            <if test="bzrq != null" >#{bzrq},</if>
            <if test="bgr != null" >#{bgr},</if>
            <if test="yqxfrq != null" >#{yqxfrq},</if>
            <if test="sbfzr != null" >#{sbfzr},</if>
            <if test="sbdd != null" >#{sbdd},</if>
            <if test="gzms != null" >#{gzms},</if>
            <if test="bz != null" >#{bz},</if>
            <if test="tbr != null" >#{tbr},</if>
            <if test="tbsj != null" >#{tbsj},</if>
            <if test="tbdw != null" >#{tbdw},</if>
            <if test="tbbm != null" >#{tbbm},</if>
            <if test="tbdwdm != null" >#{tbdwdm},</if>
            <if test="fpzt != null" >#{fpzt},</if>
            <if test="fpry != null" >#{fpry},</if>
            <if test="bxfs != null" >#{bxfs},</if>
            <if test="isly != null" >#{isly},</if>
            <if test="isww != null" >#{isww},</if>
        </trim>
    </insert>

    <update id="editGzbx" parameterType="com.hdsx.jdwh.entity.Gzbx" >
        update JDWH_GZBX
        <set>
            <if test="id != null" >id=#{id},</if>
            <if test="djbh != null" >djbh=#{djbh},</if>
            <if test="gzlx != null" >gzlx=#{gzlx},</if>
            <if test="sbmc != null" >sbmc=#{sbmc},</if>
            <if test="ggxh != null" >ggxh=#{ggxh},</if>
            <if test="bzrq != null" >bzrq=#{bzrq},</if>
            <if test="bgr != null" >bgr=#{bgr},</if>
            <if test="yqxfrq != null" >yqxfrq=#{yqxfrq},</if>
            <if test="sbfzr != null" >sbfzr=#{sbfzr},</if>
            <if test="sbdd != null" >sbdd=#{sbdd},</if>
            <if test="gzms != null" >gzms=#{gzms},</if>
            <if test="bz != null" >bz=#{bz},</if>
            <if test="tbr != null" >tbr=#{tbr},</if>
            <if test="tbsj != null" >tbsj=#{tbsj},</if>
            <if test="tbdw != null" >tbdw=#{tbdw},</if>
            <if test="tbbm != null" >tbbm=#{tbbm},</if>
            <if test="tbdwdm != null" >tbdwdm=#{tbdwdm},</if>
            <if test="fpzt != null" >fpzt=#{fpzt},</if>
            <if test="fpry != null" >fpry=#{fpry},</if>
            <if test="bxfs != null" >bxfs=#{bxfs},</if>
            <if test="isly != null" >isly=#{isly},</if>
            <if test="isww != null" >isww=#{isww},</if>
        </set>
        where 1=1 and djbh=#{djbh}
    </update>

    <delete id="delGzbxByDjbhs" parameterType="java.util.List" >
        delete from JDWH_GZBX
        where djbh in
        <foreach collection="list" item="id"  open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>

    <select id="getGzbxInfoByIDjbh" parameterType="string" resultType="com.hdsx.jdwh.entity.Gzbx">
        select * from JDWH_GZBX
        where djbh=#{value}
    </select>

    <select id="getGzbxList" parameterType="string" resultType="com.hdsx.jdwh.entity.Gzbx">
        select * from JDWH_GZBX
        where 1=1
        <if test="djbh !=null and djbh !=''">and djbh like #{djbh}||'%'</if>
        <if test="tbdwdm !=null and tbdwdm !=''">and tbdwdm like #{tbdwdm}||'%'</if>
        <if test="gzlx !=null and gzlx !=''">and gzlx like #{gzlx}||'%'</if>
        <if test="ggxh !=null and ggxh !=''">and ggxh like #{ggxh}||'%'</if>
        <if test="ksrq != null and ksrq != ''">
            and to_date(bzrq,'yyyy-mm-dd')>=to_date(#{ksrq},'yyyy-mm-dd')
        </if>
        <if test="jsrq != null and jsrq != ''">
            and to_date(bzrq,'yyyy-mm-dd')&lt;=to_date(#{jsrq},'yyyy-mm-dd')
        </if>
    </select>



</mapper>